{% extends "base.html" %}
{% block title %}Exercise Report - FitTrack{% endblock %}

{% block content %}
<div class="weight-history">
  <h1>Exercise History</h1>

  <div class="content-box">

    <!-- Exercise Minutes Card -->
    <div class="card text-center border-primary bg-light-subtle mb-3 shadow-sm">
      <div class="card-body">
        <h2 class="fw-bold text-dark">
          Exercise Minutes This Week:
          <span class="gradient-text" id="exercise-minutes-this-week">â€”</span>
        </h2>
      </div>
    </div>

    <!-- Weekly Goal Message -->
    <div
      id="goalMessage"
      class="alert alert-warning text-center fs-5 fw-medium"
      role="alert"
    ></div>

    <!-- Progress Label + Bar -->
<div class="card text-center border-success bg-light-subtle mb-4 shadow-sm w-100">
  <div class="card-body">
    <h2 class="fw-bold text-dark mb-3">Goal Progress</h2>

    <!-- Goal Percentage Badge -->
    <div id="goal-progress-percent" class="goal-percentage-badge mb-2">
      0% of weekly goal
    </div>

    <!-- Actual Progress Bar -->
    <div class="goal-progress-bar" style="width: 100%; background: #eee; height: 24px; border-radius: 12px; overflow: hidden;">
      <div
        id="goal-progress-fill"
        style="width: 0%; height: 100%; background: #00c9ff; transition: width 1s ease;"
      ></div>
    </div>
  </div>
</div>

    <!-- Goal Summary Table -->
    <table class="exercise-goal-table">
      <thead>
        <tr>
          <th>Goal (min/week)</th>
          <th>Completed</th>
          <th>Remaining</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td id="goal-minutes"></td>
          <td id="completed-minutes"></td>
          <td id="remaining-minutes"></td>
        </tr>
      </tbody>
    </table>

    <!-- Exercise Over Time Section -->
    <div class="chart-header">
      <h2>Exercise Over Time</h2>
      <p>View your exercise time recorded over the last week, month and year.</p>

      <!-- Toggle Buttons -->
      <div style="text-align: center; margin-bottom: 20px;">
        <button id="btn-ex-week" class="toggle-btn active">Week</button>
        <button id="btn-ex-month" class="toggle-btn">Month</button>
        <button id="btn-ex-year" class="toggle-btn">Year</button>
      </div>
    </div>

    <div class="chart-container">
      <canvas id="exerciseChart"></canvas>
    </div>

    <!-- Exercise Breakdown Section -->
    <h2 style="margin-top: 50px;">Exercise Breakdown</h2>
    <p style="text-align: center;">
      View how your time exercising is distributed across different exercise
      types and intensity levels.
    </p>

    <div class="exercise-chart-row">
      <div class="chart-wrapper">
        <h3 style="text-align: center;">By Type</h3>
        <canvas id="typeBreakdownChart"></canvas>
      </div>
      <div class="chart-wrapper">
        <h3 style="text-align: center;">By Intensity</h3>
        <canvas id="intensityBreakdownChart"></canvas>
      </div>
    </div>

  </div>
</div>
{% endblock %}

{% block scripts %}
<script src="{{ url_for('static', filename='js/exercise.js') }}"></script>
{% endblock %}
